
<!DOCTYPE html>

<html class="no-js" lang="ko-KR"
	prefix="og: https://ogp.me/ns#" >

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

        <link rel="profile" href="https://gmpg.org/xfn/11">

        <title>[트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기 | 우아한형제들 기술블로그</title>

		<!-- All in One SEO 4.1.7 -->
		<meta name="robots" content="max-image-preview:large" />
		<link rel="canonical" href="https://techblog.woowahan.com/15469/" />
		<meta property="og:locale" content="ko_KR" />
		<meta property="og:site_name" content="우아한형제들 기술블로그  |" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="[트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기 | 우아한형제들 기술블로그" />
		<meta property="og:url" content="https://techblog.woowahan.com/15469/" />
		<meta property="og:image" content="https://techblog.woowahan.com/wp-content/uploads/2021/06/screenshot.jpg" />
		<meta property="og:image:secure_url" content="https://techblog.woowahan.com/wp-content/uploads/2021/06/screenshot.jpg" />
		<meta property="og:image:width" content="1640" />
		<meta property="og:image:height" content="856" />
		<meta property="article:published_time" content="2023-12-21T07:29:24+00:00" />
		<meta property="article:modified_time" content="2023-12-21T07:29:37+00:00" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content="[트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기 | 우아한형제들 기술블로그" />
		<meta name="twitter:image" content="https://techblog.woowahan.com/wp-content/uploads/2021/06/screenshot.jpg" />
		<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"https:\/\/techblog.woowahan.com\/#website","url":"https:\/\/techblog.woowahan.com\/","name":"\uc6b0\uc544\ud55c\ud615\uc81c\ub4e4 \uae30\uc220\ube14\ub85c\uadf8","inLanguage":"ko-KR","publisher":{"@id":"https:\/\/techblog.woowahan.com\/#organization"}},{"@type":"Organization","@id":"https:\/\/techblog.woowahan.com\/#organization","name":"\uc6b0\uc544\ud55c\ud615\uc81c\ub4e4 \uae30\uc220\ube14\ub85c\uadf8","url":"https:\/\/techblog.woowahan.com\/","logo":{"@type":"ImageObject","@id":"https:\/\/techblog.woowahan.com\/#organizationLogo","url":"https:\/\/techblog.woowa.in\/wp-content\/uploads\/2021\/06\/screenshot.jpg"},"image":{"@id":"https:\/\/techblog.woowahan.com\/#organizationLogo"}},{"@type":"BreadcrumbList","@id":"https:\/\/techblog.woowahan.com\/15469\/#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/techblog.woowahan.com\/#listItem","position":1,"item":{"@type":"WebPage","@id":"https:\/\/techblog.woowahan.com\/","name":"\ud648","description":"\uc6b0\uc544\ud55c\ud615\uc81c\ub4e4\uc758 \uae30\uc220, \uc11c\ube44\uc2a4, \ube44\uc804, \uac00\uce58\ub97c \ub4e4\ub824 \ub4dc\ub9bd\ub2c8\ub2e4.","url":"https:\/\/techblog.woowahan.com\/"}}]},{"@type":"Person","@id":"https:\/\/techblog.woowahan.com\/author\/young-lee\/#author","url":"https:\/\/techblog.woowahan.com\/author\/young-lee\/","name":"\uc774\uc8fc\uc601","image":{"@type":"ImageObject","@id":"https:\/\/techblog.woowahan.com\/15469\/#authorImage","url":"https:\/\/techblog.woowahan.com\/wp-content\/uploads\/2023\/12\/profile-02.png","width":96,"height":96,"caption":"\uc774\uc8fc\uc601"}},{"@type":"WebPage","@id":"https:\/\/techblog.woowahan.com\/15469\/#webpage","url":"https:\/\/techblog.woowahan.com\/15469\/","name":"[\ud2b8\ub7ec\ube14\uc288\ud305\uae30] CSR\uc5d0\uc11c \ub3d9\uc801 OG \uba54\ud0c0\ud0dc\uadf8 \uc801\uc6a9\ud558\uae30 | \uc6b0\uc544\ud55c\ud615\uc81c\ub4e4 \uae30\uc220\ube14\ub85c\uadf8","inLanguage":"ko-KR","isPartOf":{"@id":"https:\/\/techblog.woowahan.com\/#website"},"breadcrumb":{"@id":"https:\/\/techblog.woowahan.com\/15469\/#breadcrumblist"},"author":"https:\/\/techblog.woowahan.com\/author\/young-lee\/#author","creator":"https:\/\/techblog.woowahan.com\/author\/young-lee\/#author","datePublished":"2023-12-21T07:29:24+09:00","dateModified":"2023-12-21T07:29:37+09:00"},{"@type":"Article","@id":"https:\/\/techblog.woowahan.com\/15469\/#article","name":"[\ud2b8\ub7ec\ube14\uc288\ud305\uae30] CSR\uc5d0\uc11c \ub3d9\uc801 OG \uba54\ud0c0\ud0dc\uadf8 \uc801\uc6a9\ud558\uae30 | \uc6b0\uc544\ud55c\ud615\uc81c\ub4e4 \uae30\uc220\ube14\ub85c\uadf8","inLanguage":"ko-KR","headline":"[\ud2b8\ub7ec\ube14\uc288\ud305\uae30] CSR\uc5d0\uc11c \ub3d9\uc801 OG \uba54\ud0c0\ud0dc\uadf8 \uc801\uc6a9\ud558\uae30","author":{"@id":"https:\/\/techblog.woowahan.com\/author\/young-lee\/#author"},"publisher":{"@id":"https:\/\/techblog.woowahan.com\/#organization"},"datePublished":"2023-12-21T07:29:24+09:00","dateModified":"2023-12-21T07:29:37+09:00","articleSection":"AWS, Web Frontend","mainEntityOfPage":{"@id":"https:\/\/techblog.woowahan.com\/15469\/#webpage"},"isPartOf":{"@id":"https:\/\/techblog.woowahan.com\/15469\/#webpage"},"image":{"@type":"ImageObject","@id":"https:\/\/techblog.woowahan.com\/#articleImage","url":"https:\/\/techblog.woowahan.com\/wp-content\/uploads\/2023\/12\/Pasted-image-20231215203852.png","width":998,"height":729}}]}
		</script>
		<!-- All in One SEO -->


            <script data-no-defer="1" data-ezscrex="false" data-cfasync="false" data-pagespeed-no-defer data-cookieconsent="ignore">
                var ctPublicFunctions = {"_ajax_nonce":"f5568abe12","_rest_nonce":"dc4ee423be","_ajax_url":"\/wp-admin\/admin-ajax.php","_rest_url":"https:\/\/techblog.woowahan.com\/wp-json\/","data__cookies_type":"none","data__ajax_type":"rest","text__wait_for_decoding":"Decoding the contact data, let us a few seconds to finish. Anti-Spam by CleanTalk","cookiePrefix":"","wprocket_detected":false}
            </script>
        
            <script data-no-defer="1" data-ezscrex="false" data-cfasync="false" data-pagespeed-no-defer data-cookieconsent="ignore">
                var ctPublic = {"_ajax_nonce":"f5568abe12","settings__forms__check_internal":"0","settings__forms__check_external":"0","settings__forms__search_test":"1","blog_home":"https:\/\/techblog.woowahan.com\/","pixel__setting":"3","pixel__enabled":true,"pixel__url":"https:\/\/moderate6-v4.cleantalk.org\/pixel\/da9185309489d3de438cbe307c5d9ab5.gif","data__email_check_before_post":"1","data__cookies_type":"none","data__key_is_ok":true,"data__visible_fields_required":true,"data__to_local_storage":{"apbct_cookies_test":"%7B%22cookies_names%22%3A%5B%22apbct_timestamp%22%2C%22apbct_site_landing_ts%22%5D%2C%22check_value%22%3A%22b4074ba0c5a6319f536fe3658f98872e%22%7D","apbct_site_landing_ts":"1703516841","apbct_timestamp":"1703516841","apbct_urls":"{\"techblog.woowahan.com\/15469\/\":[1703516841]}"},"wl_brandname":"Anti-Spam by CleanTalk","wl_brandname_short":"CleanTalk","ct_checkjs_key":"5d875f8195a8fbeb9689c586b508ec17aa4dd9c79b3ca1d436d4f6c8c1ab01ad"}
            </script>
        <link rel='dns-prefetch' href='//fonts.bunny.net' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="우아한형제들 기술블로그 &raquo; 피드" href="https://techblog.woowahan.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="우아한형제들 기술블로그 &raquo; 댓글 피드" href="https://techblog.woowahan.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="우아한형제들 기술블로그 &raquo; [트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기 댓글 피드" href="https://techblog.woowahan.com/15469/feed/" />
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/techblog.woowahan.com\/wp-includes\/js\/wp-emoji-release.min.js"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='https://techblog.woowahan.com/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='ct_public_css-css'  href='https://techblog.woowahan.com/wp-content/plugins/cleantalk-spam-protect/css/cleantalk-public.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='post_hit_counter-frontend-css'  href='https://techblog.woowahan.com/wp-content/plugins/post-hit-counter/assets/css/frontend.css' type='text/css' media='all' />
<link rel='stylesheet' id='wpda_wpdp_public-css'  href='https://techblog.woowahan.com/wp-content/plugins/wp-data-access/public/../assets/css/wpda_public.css' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/assets/styles/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='post_hit_counter-widget-css'  href='https://techblog.woowahan.com/wp-content/plugins/post-hit-counter/assets/css/widget.css' type='text/css' media='all' />
<link rel='stylesheet' id='sab-font-css'  href='https://fonts.bunny.net/css?family=Noto+Sans:400,700,400italic,700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' id='prism-css-0-css'  href='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/themes/prism.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='prism-css-1-css'  href='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/plugins/line-numbers/prism-line-numbers.css' type='text/css' media='all' />
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/jquery/jquery.min.js' id='jquery-core-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/jquery/jquery-migrate.min.js' id='jquery-migrate-js'></script>
<script type='text/javascript' data-pagespeed-no-defer src='https://techblog.woowahan.com/wp-content/plugins/cleantalk-spam-protect/js/apbct-public-bundle.min.js' id='ct_public_functions-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/underscore.min.js' id='underscore-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/backbone.min.js' id='backbone-js'></script>
<script type='text/javascript' id='wp-api-request-js-extra'>
/* <![CDATA[ */
var wpApiSettings = {"root":"https:\/\/techblog.woowahan.com\/wp-json\/","nonce":"dc4ee423be","versionString":"wp\/v2\/"};
/* ]]> */
</script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/api-request.min.js' id='wp-api-request-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-includes/js/wp-api.min.js' id='wp-api-js'></script>
<script type='text/javascript' id='wpda_rest_api-js-extra'>
/* <![CDATA[ */
var wpdaApiSettings = {"path":"wpda"};
/* ]]> */
</script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/wp-data-access/public/../assets/js/wpda_rest_api.js' id='wpda_rest_api-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/assets/js/sticky.min.js' id='sticky-js-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/assets/js/swiper-bundle.min.js' id='swiper-js-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/build/vue.min.js' id='vuejs-js'></script>
<link rel="https://api.w.org/" href="https://techblog.woowahan.com/wp-json/" /><link rel="alternate" type="application/json" href="https://techblog.woowahan.com/wp-json/wp/v2/posts/15469" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://techblog.woowahan.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://techblog.woowahan.com/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://techblog.woowahan.com/?p=15469' />
<link rel="alternate" type="application/json+oembed" href="https://techblog.woowahan.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechblog.woowahan.com%2F15469%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://techblog.woowahan.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechblog.woowahan.com%2F15469%2F&#038;format=xml" />
        <script type="text/javascript">
            var StrCPVisits_page_data = {
                'abort' : 'false',
                'title' : '[트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기',
            };

        </script>
        <!-- This website uses the Ultimate Social Comments plugin v2.0.0 - https://wordpress.org/plugins/ultimate-facebook-comments/ -->
<meta property="fb:app_id" content="596588250503455"/>
<style type="text/css">.fb-comments, .fb-comments span, .fb-comments span iframe[style] { min-width:100% !important; width:100% !important }</style>
<style type="text/css">.saboxplugin-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;border:1px solid #eee;width:100%;clear:both;display:block;overflow:hidden;word-wrap:break-word;position:relative}.saboxplugin-wrap .saboxplugin-gravatar{float:left;padding:0 20px 20px 20px}.saboxplugin-wrap .saboxplugin-gravatar img{max-width:100px;height:auto;border-radius:0;}.saboxplugin-wrap .saboxplugin-authorname{font-size:18px;line-height:1;margin:20px 0 0 20px;display:block}.saboxplugin-wrap .saboxplugin-authorname a{text-decoration:none}.saboxplugin-wrap .saboxplugin-authorname a:focus{outline:0}.saboxplugin-wrap .saboxplugin-desc{display:block;margin:5px 20px}.saboxplugin-wrap .saboxplugin-desc a{text-decoration:underline}.saboxplugin-wrap .saboxplugin-desc p{margin:5px 0 12px}.saboxplugin-wrap .saboxplugin-web{margin:0 20px 15px;text-align:left}.saboxplugin-wrap .sab-web-position{text-align:right}.saboxplugin-wrap .saboxplugin-web a{color:#ccc;text-decoration:none}.saboxplugin-wrap .saboxplugin-socials{position:relative;display:block;background:#fcfcfc;padding:5px;border-top:1px solid #eee}.saboxplugin-wrap .saboxplugin-socials a svg{width:20px;height:20px}.saboxplugin-wrap .saboxplugin-socials a svg .st2{fill:#fff; transform-origin:center center;}.saboxplugin-wrap .saboxplugin-socials a svg .st1{fill:rgba(0,0,0,.3)}.saboxplugin-wrap .saboxplugin-socials a:hover{opacity:.8;-webkit-transition:opacity .4s;-moz-transition:opacity .4s;-o-transition:opacity .4s;transition:opacity .4s;box-shadow:none!important;-webkit-box-shadow:none!important}.saboxplugin-wrap .saboxplugin-socials .saboxplugin-icon-color{box-shadow:none;padding:0;border:0;-webkit-transition:opacity .4s;-moz-transition:opacity .4s;-o-transition:opacity .4s;transition:opacity .4s;display:inline-block;color:#fff;font-size:0;text-decoration:inherit;margin:5px;-webkit-border-radius:0;-moz-border-radius:0;-ms-border-radius:0;-o-border-radius:0;border-radius:0;overflow:hidden}.saboxplugin-wrap .saboxplugin-socials .saboxplugin-icon-grey{text-decoration:inherit;box-shadow:none;position:relative;display:-moz-inline-stack;display:inline-block;vertical-align:middle;zoom:1;margin:10px 5px;color:#444;fill:#444}.clearfix:after,.clearfix:before{content:' ';display:table;line-height:0;clear:both}.ie7 .clearfix{zoom:1}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-twitch{border-color:#38245c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-addthis{border-color:#e91c00}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-behance{border-color:#003eb0}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-delicious{border-color:#06c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-deviantart{border-color:#036824}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-digg{border-color:#00327c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-dribbble{border-color:#ba1655}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-facebook{border-color:#1e2e4f}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-flickr{border-color:#003576}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-github{border-color:#264874}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-google{border-color:#0b51c5}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-googleplus{border-color:#96271a}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-html5{border-color:#902e13}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-instagram{border-color:#1630aa}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-linkedin{border-color:#00344f}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-pinterest{border-color:#5b040e}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-reddit{border-color:#992900}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-rss{border-color:#a43b0a}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-sharethis{border-color:#5d8420}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-skype{border-color:#00658a}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-soundcloud{border-color:#995200}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-spotify{border-color:#0f612c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-stackoverflow{border-color:#a95009}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-steam{border-color:#006388}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-user_email{border-color:#b84e05}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-stumbleUpon{border-color:#9b280e}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-tumblr{border-color:#10151b}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-twitter{border-color:#0967a0}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-vimeo{border-color:#0d7091}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-windows{border-color:#003f71}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-whatsapp{border-color:#003f71}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-wordpress{border-color:#0f3647}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-yahoo{border-color:#14002d}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-youtube{border-color:#900}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-xing{border-color:#000202}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-mixcloud{border-color:#2475a0}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-vk{border-color:#243549}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-medium{border-color:#00452c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-quora{border-color:#420e00}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-meetup{border-color:#9b181c}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-goodreads{border-color:#000}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-snapchat{border-color:#999700}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-500px{border-color:#00557f}.saboxplugin-socials.sabox-colored .saboxplugin-icon-color .sab-mastodont{border-color:#185886}.sabox-plus-item{margin-bottom:20px}@media screen and (max-width:480px){.saboxplugin-wrap{text-align:center}.saboxplugin-wrap .saboxplugin-gravatar{float:none;padding:20px 0;text-align:center;margin:0 auto;display:block}.saboxplugin-wrap .saboxplugin-gravatar img{float:none;display:inline-block;display:-moz-inline-stack;vertical-align:middle;zoom:1}.saboxplugin-wrap .saboxplugin-desc{margin:0 10px 20px;text-align:center}.saboxplugin-wrap .saboxplugin-authorname{text-align:center;margin:10px 0 20px}}body .saboxplugin-authorname a,body .saboxplugin-authorname a:hover{box-shadow:none;-webkit-box-shadow:none}a.sab-profile-edit{font-size:16px!important;line-height:1!important}.sab-edit-settings a,a.sab-profile-edit{color:#0073aa!important;box-shadow:none!important;-webkit-box-shadow:none!important}.sab-edit-settings{margin-right:15px;position:absolute;right:0;z-index:2;bottom:10px;line-height:20px}.sab-edit-settings i{margin-left:5px}.saboxplugin-socials{line-height:1!important}.rtl .saboxplugin-wrap .saboxplugin-gravatar{float:right}.rtl .saboxplugin-wrap .saboxplugin-authorname{display:flex;align-items:center}.rtl .saboxplugin-wrap .saboxplugin-authorname .sab-profile-edit{margin-right:10px}.rtl .sab-edit-settings{right:auto;left:0}img.sab-custom-avatar{max-width:75px;}.saboxplugin-wrap .saboxplugin-socials .saboxplugin-icon-color .st1 {display: none;}.saboxplugin-wrap .saboxplugin-authorname {font-family:"Noto Sans";}.saboxplugin-wrap .saboxplugin-desc {font-family:Noto Sans;}.saboxplugin-wrap {margin-top:40px; margin-bottom:0px; padding: 0px 0px }.saboxplugin-wrap .saboxplugin-authorname {font-size:14px; line-height:21px;}.saboxplugin-wrap .saboxplugin-desc p, .saboxplugin-wrap .saboxplugin-desc {font-size:14px !important; line-height:21px !important;}.saboxplugin-wrap .saboxplugin-web {font-size:14px;}.saboxplugin-wrap .saboxplugin-socials a svg {width:36px;height:36px;}</style><link rel="icon" href="https://techblog.woowahan.com/wp-content/uploads/2020/08/favicon.ico" sizes="32x32" />
<link rel="icon" href="https://techblog.woowahan.com/wp-content/uploads/2020/08/favicon.ico" sizes="192x192" />
<link rel="apple-touch-icon" href="https://techblog.woowahan.com/wp-content/uploads/2020/08/favicon.ico" />
<meta name="msapplication-TileImage" content="https://techblog.woowahan.com/wp-content/uploads/2020/08/favicon.ico" />

        <script type="text/javascript">
            var ajaxurl = "https://techblog.woowahan.com/wp-admin/admin-ajax.php";
        </script>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-JQ34XQDGNB"></script>
        <script>
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', 'G-JQ34XQDGNB');
        </script>
        <!-- Naver -->
        <meta name="naver-site-verification" content="4b53b1e487890e94c3d0f88804669d2f565d1eb0"/>
    </head>

<body data-rsssl=1 class="post-template-default single single-post postid-15469 single-format-standard wp-embed-responsive" data-barba="wrapper">
    <div class="top-navigation">
        <div class="top-navigation-inner">
            <h1>
                <a href="https://techblog.woowahan.com/" aria-label="우아한형제들 기술블로그">
                    <svg width="214" height="25" viewBox="0 0 214 25" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M47.2154 2.35918C45.0335 2.35918 43.1243 3.69245 43.1243 5.74569V8.1989C43.1243 10.3055 44.9244 11.5321 47.6517 11.5321H55.5338C58.0702 11.5321 59.9793 10.0122 59.9793 8.01225V5.98568C59.9793 3.23914 57.6611 2.35918 55.4519 2.35918H47.2154ZM62.0521 13.5587H41.3516V16.8118H49.7791V24.5715H53.461V16.8118H62.0521V13.5587ZM48.0881 8.81221C46.6972 8.81221 46.3426 7.95892 46.3426 6.99896C46.3426 6.06567 46.8063 5.26571 48.0881 5.26571H54.9065C55.9701 5.26571 56.6792 5.82569 56.6792 6.99896C56.6792 8.19891 55.9701 8.81221 54.9065 8.81221H48.0881Z" fill="black"/>
<path d="M71.3215 19.3717C73.4761 19.3717 75.9307 17.5585 75.9307 14.5453V8.38556C75.9307 5.07905 73.7488 3.37247 70.776 3.37247H69.2214C65.294 3.37247 63.9576 5.55903 63.9576 8.3589V14.8386C63.9576 18.2784 66.4668 19.3717 68.6487 19.3717H71.3215ZM81.9309 9.34552V2.11919H78.4126V24.3315H81.9309V12.7854H84.9855V9.34552H81.9309ZM69.576 16.6252C67.3941 16.6252 67.2577 14.9986 67.2577 14.1453V8.62555C67.2577 7.45227 67.9396 6.199 69.576 6.199H70.4214C72.0579 6.199 72.6579 7.71893 72.6579 8.89221V14.2786C72.6579 15.3186 71.7578 16.6252 70.4214 16.6252H69.576Z" fill="black"/>
<path d="M94.4717 2.11919H90.7353V3.63912H86.3442V6.09234H88.2534C87.6261 6.73231 87.2443 7.61227 87.2443 8.54556V11.5854C87.2443 13.5853 88.9625 15.1586 90.8989 15.1586H94.2808C96.2172 15.1586 97.9082 13.5587 97.9082 11.3188V8.54556C97.9082 7.61227 97.5264 6.73231 96.8991 6.09234H98.8628V3.63912H94.4717V2.11919ZM105.054 20.865H92.1808V16.6518H88.7443V24.0382H105.054V20.865ZM104.29 2.09253H100.772V17.2651H104.29V11.3188H107.508V8.11891H104.29V2.09253ZM94.7445 10.9454C94.7445 11.8254 94.199 12.4654 93.299 12.4654H91.7717C90.8989 12.4654 90.3807 11.8254 90.3807 10.9454V9.23886C90.3807 8.38556 91.1716 7.74559 92.0444 7.74559H93.1899C94.0899 7.74559 94.7445 8.38556 94.7445 9.23886V10.9454Z" fill="black"/>
<path d="M127.507 23.7507V3.08504H125.516V23.7507H127.507ZM121.725 4.81829H111.279V6.68487H119.543C119.27 9.96472 116.352 13.9112 112.561 16.9511V19.5109C113.897 18.4443 115.343 17.3244 116.434 16.1778C118.806 13.7245 121.725 9.83139 121.725 6.36489V4.81829Z" fill="black"/>
<path d="M130.967 12.9246H139.449V15.4845H132.603V16.6844H145.831V19.0843H132.603V23.7507C137.976 23.7507 142.585 23.7774 148.013 23.7774V22.4975H134.594V20.2309H148.013V15.4845H141.385V12.9246H149.894V11.6446H130.967V12.9246ZM132.058 9.93805C135.112 9.48474 139.04 8.04481 140.321 5.45826C141.631 8.07147 145.367 9.53807 148.285 9.91138V8.55145C144.385 7.77815 141.767 5.75158 141.467 3.77834C141.412 3.40503 141.385 3.00505 141.467 2.60506H139.203C139.285 3.00505 139.285 3.37836 139.203 3.77834C138.849 5.83158 135.549 8.04481 132.058 8.44479V9.93805Z" fill="black"/>
<path d="M152.502 13.4845H171.866V11.9646H152.502V13.4845ZM154.52 23.7241H169.63V22.4708H156.457V20.4442H169.63V15.8578H154.52V17.031H167.475V19.1909H154.52V23.7241ZM155.066 9.5914H169.33V2.79088H167.475V4.63164H156.921V2.79088H155.066V9.5914ZM156.921 8.2848V5.91157H167.475V8.2848H156.921Z" fill="black"/>
<path d="M173.843 21.7508H192.989V20.1242H184.207V16.8444H182.325V20.1242H173.843V21.7508ZM175.834 15.0311H190.971V13.8045H177.907V10.818H190.971V4.63164H175.834V6.25822H188.898V9.5914H175.834V15.0311Z" fill="black"/>
<path d="M195.564 21.6442H214.001V19.9109H195.564V21.6442ZM197.446 6.31156H209.664C209.91 8.9781 209.61 14.0445 207.837 17.0844H210.046C210.292 16.5244 210.592 15.7511 210.837 14.9245C211.328 13.1912 211.874 10.1514 211.874 6.41822V4.71163H197.446V6.31156Z" fill="black"/>
<g clip-path="url(#clip0_24_5218)">
<path d="M25.4399 7.52795H26.0019V5.82287L25.4399 5.27257V2.52451L23.7215 0.579536V0.55718H21.6838V0.922614L21.5061 0.673259V0.650903H19.8035V0H17.7667V0.650903H16.0799V1.20722L15.6868 0.613929L15.6815 0.625107V0.619089H13.6447V2.28203L13.4671 2.0258V2.00172L12.052 0.618229H9.45499L8.03995 2.00172V2.59329L8.03204 2.58555L7.64156 2.03955V2.00086L6.22652 0.617369H1.41416L0 2.00258V4.8779L1.41416 6.26053H1.43087L1.4124 6.26483L1.68767 6.53396H0V8.52536H0.00879452L2.01219 10.2064H2.80281V11.6045H1.68679V12.2571H0V13.6621H0.00527671L0.677178 14.319L0 14.9811V17.5374L1.41416 18.9209H2.00603L0.639362 20.2571V21.9381L2.0588 23.3207L3.9804 25.0017H8.03116L9.36001 23.7034V22.141L7.75149 20.5684H9.36001V20.0834L9.83492 20.5494L9.82964 20.5684H11.2799L11.7161 19.0507L12.7996 20.1109V23.3009L12.7952 23.3113L12.7996 23.3147V23.3199H12.8057L14.8126 25H17.4V24.2683L18.1132 24.9647H25.4601V23.5598L24.6396 22.7584H25.4601V19.7206L24.7847 19.086H25.4601V17.9682L24.688 17.2863H25.4601V15.8805L24.892 15.3663H25.4601V14.2476L24.5024 13.3629H25.4399V11.6586L23.8903 10.1453H25.4399V7.5288V7.52795ZM23.4066 9.69046H23.3926V9.67842L23.4066 9.69046Z" fill="#070606"/>
<path d="M15.3926 4.21412V0.919189H13.9424V11.399H15.3926V7.78247V7.51076V5.632H15.9176V4.21412H15.3926Z" fill="white"/>
<path d="M11.9363 0.919189H9.58642L8.34375 2.13329V7.03097L9.58642 8.24421H11.9363L13.179 7.03097V2.13329L11.9363 0.919189ZM11.7296 6.82719H9.79309V2.33449H11.7296V6.82719Z" fill="white"/>
<path d="M17.8264 9.98213V8.6958H16.3779V11.3992H23.425V9.98213H17.8264Z" fill="white"/>
<path d="M19.5114 0.951079V0.299316H18.063V0.951079H16.3779V1.78083H21.2114V0.951079H19.5114Z" fill="white"/>
<path d="M23.4252 4.15051V0.856445H21.9785V8.18233H23.4252V5.5684H23.9881V4.15051H23.4252Z" fill="white"/>
<path d="M17.6162 2.29053L16.3779 3.50549V7.02999L17.6197 8.24324H19.9714L21.2123 7.02999V3.50549L19.9714 2.29053H17.6162ZM19.7629 6.82707H17.8246V3.70841H19.7629V6.82707Z" fill="white"/>
<path d="M13.0954 12.5393V14.7422H12.4561V16.1593H13.0954V23.0286H13.9995V12.5393H13.0954Z" fill="white"/>
<path d="M15.3864 12.5393H14.4814V23.0286H15.3864V12.5393Z" fill="white"/>
<path d="M11.1096 13.3708H12.5361V12.5393H8.33321V13.3708H9.66207L8.1582 18.5969H9.30325L10.385 14.836L11.4693 18.5969H12.6153L11.1096 13.3708Z" fill="white"/>
<path d="M5.89679 12.54V13.8788H5.55469V15.2984H5.89679V16.2073H5.55469V17.6243H5.89679V18.5951H7.34701V12.54H5.89679Z" fill="white"/>
<path d="M3.42998 12.5392V11.8892H1.98064V12.5392H0.292969V13.3707H5.1326V12.5392H3.42998Z" fill="white"/>
<path d="M6.10644 19.1565H2.17528L0.932617 20.3715V21.8126L2.17792 23.0275H6.10468L7.34822 21.8126V20.3715L6.10644 19.1565ZM5.89713 21.6096H2.38283V20.5735H5.89713V21.6096Z" fill="white"/>
<path d="M3.88905 13.8806H1.53563L0.292969 15.0964V17.4146L1.53563 18.6295H3.88905L5.1326 17.4146V15.0964L3.88905 13.8806ZM3.68062 17.2117H1.74319V15.2985H3.68062V17.2117Z" fill="white"/>
<path d="M23.4477 16.2812H16.3945V17.1119H23.4477V16.2812Z" fill="white"/>
<path d="M17.8439 13.3946H23.4486V12.5623H16.3945V15.3138H23.4486V14.196H17.8439V13.3946Z" fill="white"/>
<path d="M22.0002 19.9546H16.3945V22.9941H23.4486V21.8763H17.8439V20.786H23.4486V18.0354H16.3945V19.1532H22.0002V19.9546Z" fill="white"/>
<path d="M0.311523 6.82788V8.24319H3.11082V11.3988H3.1161H4.5584V8.24319H7.35858V6.82788H0.311523Z" fill="white"/>
<path d="M6.11679 0.919317H1.55243L0.311523 2.13342V4.76884L1.55243 5.98294H6.11679L7.35858 4.76884V2.13256L6.11679 0.918457V0.919317ZM5.91012 4.56506H1.75998V2.33462H5.911V4.56506H5.91012Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_24_5218">
<rect width="26.0028" height="25" fill="white"/>
</clipPath>
</defs>
</svg>
                </a>
            </h1>

                        <div class="top-navigation-main" style="--hidden-delay-count: 22">
                <nav class="top-navigation-global">
                    <a href="https://techblog.woowahan.com/category/ai/" style="--category-order: 0;"><span>AI</span></a><a href="https://techblog.woowahan.com/category/app/" style="--category-order: 1;"><span>APP</span></a><a href="https://techblog.woowahan.com/category/aws/" style="--category-order: 2;"><span>AWS</span></a><a href="https://techblog.woowahan.com/category/backend/" style="--category-order: 3;"><span>Backend</span></a><a href="https://techblog.woowahan.com/category/culture/" style="--category-order: 4;"><span>Culture</span></a><a href="https://techblog.woowahan.com/category/data/" style="--category-order: 5;"><span>Data</span></a><a href="https://techblog.woowahan.com/category/deep-learning/" style="--category-order: 6;"><span>Deep Learning</span></a><a href="https://techblog.woowahan.com/category/education/" style="--category-order: 7;"><span>Education</span></a><a href="https://techblog.woowahan.com/category/infra/" style="--category-order: 8;"><span>Infra</span></a><a href="https://techblog.woowahan.com/category/machine-learning/" style="--category-order: 9;"><span>Machine Learning</span></a><a href="https://techblog.woowahan.com/category/mlops/" style="--category-order: 10;"><span>MLOps</span></a><a href="https://techblog.woowahan.com/category/nlp/" style="--category-order: 11;"><span>NLP</span></a><a href="https://techblog.woowahan.com/category/pm/" style="--category-order: 12;"><span>PM</span></a><a href="https://techblog.woowahan.com/category/programming-general/" style="--category-order: 13;"><span>Programming General</span></a><a href="https://techblog.woowahan.com/category/qa-testing/" style="--category-order: 14;"><span>QA/Testing</span></a><a href="https://techblog.woowahan.com/category/robotics/" style="--category-order: 15;"><span>Robotics</span></a><a href="https://techblog.woowahan.com/category/security/" style="--category-order: 16;"><span>Security</span></a><a href="https://techblog.woowahan.com/category/web/" style="--category-order: 17;"><span>WEB</span></a><a href="https://techblog.woowahan.com/category/web-frontend/" style="--category-order: 18;"><span>Web Frontend</span></a><a href="https://techblog.woowahan.com/category/%ec%9a%b0%ec%95%84%ed%95%9c%ec%8a%a4%ed%84%b0%eb%94%94/" style="--category-order: 19;"><span>우아한스터디</span></a><a href="https://techblog.woowahan.com/category/woowa-tech-seminar/" style="--category-order: 20;"><span>우아한테크세미나</span></a><a href="https://techblog.woowahan.com/category/%ec%9a%b0%ec%95%84%ed%95%9c%ed%85%8c%ed%81%ac%ec%ba%a0%ed%94%84/" style="--category-order: 21;"><span>우아한테크캠프</span></a>                </nav>
                <nav class="top-navigation-custom">
                                                <a href="/14224">
                                우아한스터디                            </a>
                                            <a href="https://career.woowahan.com/?utm_source=techblog&utm_medium=display&utm_campaign=2022_1h_developer_recuiting_da&utm_content=techhr&jobCodes&employmentTypeCodes=&serviceSectionCodes=&careerPeriod=&keyword=&category=jobGroupCodes%3ABA005001&fbclid=IwAR1SDMBF6WjfUZ1WV-JrCYxYyAGBf92r-Au1TQ0seGgOuT0ZuAT7XUilsGg#recruit-list" target="_blank">
                        개발자 채용
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.3536 4H11.3536V5L11.3536 10.5H10.3536L10.3536 5.70711L4.70711 11.3536L4 10.6464L9.64645 5H4.85355V4H10.3536Z" fill="black"/>
</svg>
                    </a>
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSe5HMoawj5-lsjcOLvF5BtxWWr7D_uZXYChkWse1bgQs58C4w/viewform" target="_blank">
                        뉴스레터 신청
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.3536 4H11.3536V5L11.3536 10.5H10.3536L10.3536 5.70711L4.70711 11.3536L4 10.6464L9.64645 5H4.85355V4H10.3536Z" fill="black"/>
</svg>
                    </a>
                </nav>
                <nav class="top-navigation-social">
                    <a href="https://www.facebook.com/woowahanTech" aria-label="facebook"
                       target="_blank">
                        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.3337 9.20822H15.618H15.4153C14.8833 9.20822 14.4521 9.69326 14.4521 10.2915V12.4587H17.3337L16.9116 15.7074H14.4521V21.6667H11.2833V15.7074H8.66699V12.4587H11.2495L11.2833 9.37503L11.2738 8.26984C11.2605 6.70917 12.3746 5.43187 13.7623 5.41688C13.7703 5.41679 13.7784 5.41675 13.7864 5.41675H17.3337V9.20822Z" fill="black"/>
</svg>
                    </a>
                    <a href="https://www.youtube.com/%EC%9A%B0%EC%95%84%ED%95%9CTech" aria-label="youtube"
                       target="_blank">
                        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.2208 12.9999L11.375 15.1666V10.8333L15.2208 12.9999Z" fill="black" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.16699 13.8629V12.1357C2.16699 8.60189 2.16699 6.83438 3.14741 5.69795C4.12891 4.56029 5.67374 4.51147 8.76233 4.41259C10.2248 4.36621 11.7198 4.33325 13.0003 4.33325C14.2797 4.33325 15.7747 4.36621 17.2383 4.41259C20.3269 4.51147 21.8717 4.56029 22.8522 5.69795C23.8337 6.83438 23.8337 8.60311 23.8337 12.1357V13.8629C23.8337 17.3979 23.8337 19.1642 22.8532 20.3019C21.8717 21.4383 20.328 21.4884 17.2383 21.586C15.7758 21.6336 14.2808 21.6666 13.0003 21.6666C11.5874 21.6618 10.1746 21.6349 8.76233 21.586C5.67374 21.4884 4.12891 21.4395 3.14741 20.3019C2.16699 19.1642 2.16699 17.3967 2.16699 13.8641V13.8629Z" stroke="black" stroke-width="2"/>
</svg>
                    </a>
                </nav>
                <div class="top-navigation-search">
                    <label for="s" class="search-open"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="12" r="7" stroke="black" stroke-width="2"/>
<rect width="8.15236" height="2" transform="matrix(0.771209 0.636582 -0.64086 0.767658 16.7129 15.2485)" fill="black"/>
</svg>
</label>
                    <div class="top-navigation-search-from">
                        <div class="search-form">
                            <form role="search" method="get" id="searchform" action="/">
<!--                                <label for="s">검색어</label>-->
                                <input class="searchbar" type="text" name="s" id="s" placeholder="검색어를 입력해주세요."/>
                                <button type="submit" id="searchsubmit" value="">
                                    <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 25.2.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
	 y="0px" viewBox="0 0 36 36" style="enable-background:new 0 0 36 36;" xml:space="preserve">
<path id="Icon_awesome-search" d="M33,29.3l-6-6c-0.3-0.3-0.6-0.4-1-0.4h-1c4.3-5.5,3.3-13.3-2.2-17.6S9.5,1.9,5.2,7.4
	S1.9,20.7,7.4,25c4.5,3.5,10.9,3.5,15.4,0v1c0,0.4,0.1,0.8,0.4,1l6,6c0.6,0.6,1.5,0.6,2,0c0,0,0,0,0,0l1.7-1.7
	C33.6,30.7,33.6,29.8,33,29.3L33,29.3z M15.1,22.8c-4.3,0-7.7-3.5-7.7-7.7s3.5-7.7,7.7-7.7s7.7,3.5,7.7,7.7l0,0
	C22.8,19.4,19.4,22.8,15.1,22.8C15.1,22.8,15.1,22.8,15.1,22.8L15.1,22.8z"/>
</svg>
                                </button>
                            </form>
                            <button type="button" class="search-close">돌아가기</button>
                        </div>
                    </div>
                </div>
                <button class="top-navigation-toggle" type="button"
                        onclick="document.documentElement.classList.toggle('top-navigation-show')">
                    <i></i>
                    <span>Open main menu</span>
                </button>
            </div>
        </div>
    </div>

<div class="content vuejs">
    <div class="hambug_menu" style="display: none;">
        <div class="top"></div>
        <div class="inner">
            <div class="exit">
                <div></div>
                <div></div>
            </div>
            <div class="menu-wrap">
                <a v-for="item in categories" v-bind:href="'/category/'+item.slug" class="item link"
                   v-bind:data-id="item.cat_ID">
                    <!-- <input v-bind:id="'cat-'+item.slug" type="checkbox" v-bind:value="item.slug"
                        v-model="vcategory" /> -->
                    <label>{{item.name}}</label>
                </a>
            </div>
            <div class="menu-wrap extra">
                <!-- 추가메뉴 -->
                                        <p class="item">
                            <a href="/14224">
                                우아한스터디                            </a>
                        </p>
                                    <p class="item">
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSe5HMoawj5-lsjcOLvF5BtxWWr7D_uZXYChkWse1bgQs58C4w/viewform">
                        우아한Tech에 문의하기
                        <img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/icon/out_16px.svg" alt="" />
                    </a>
                </p>
                <p class="item"><a href="https://career.woowahan.com/?utm_source=techblog&utm_medium=display&utm_campaign=2022_1h_developer_recuiting_da&utm_content=techhr&jobCodes&employmentTypeCodes=&serviceSectionCodes=&careerPeriod=&keyword=&category=jobGroupCodes%3ABA005001&fbclid=IwAR1SDMBF6WjfUZ1WV-JrCYxYyAGBf92r-Au1TQ0seGgOuT0ZuAT7XUilsGg#recruit-list" target="_blank">
                        개발자 채용
                        <img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/icon/out_16px.svg" alt="" />
                    </a></p>
            </div>
            <div class="menu-wrap extra">
                <div class="sns_wrap">
                    <a class="sns" href="/" target="_blank">
                        <img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/icon/facebook.svg" alt="" />
                    </a>
                    <a class="sns" href="/" target="_blank">
                        <img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/icon/youtube.svg" alt="" />
                    </a>
                </div>
            </div>
        </div>
        <div class="bottom">

        </div>
    </div>
    <!-- page content -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-dark-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 0.49803921568627" /><feFuncG type="table" tableValues="0 0.49803921568627" /><feFuncB type="table" tableValues="0 0.49803921568627" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 1" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0 1" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-purple-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.54901960784314 0.98823529411765" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0.71764705882353 0.25490196078431" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-blue-red"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 1" /><feFuncG type="table" tableValues="0 0.27843137254902" /><feFuncB type="table" tableValues="0.5921568627451 0.27843137254902" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-midnight"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 0" /><feFuncG type="table" tableValues="0 0.64705882352941" /><feFuncB type="table" tableValues="0 1" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-magenta-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.78039215686275 1" /><feFuncG type="table" tableValues="0 0.94901960784314" /><feFuncB type="table" tableValues="0.35294117647059 0.47058823529412" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-purple-green"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.65098039215686 0.40392156862745" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0.44705882352941 0.4" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-blue-orange"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.098039215686275 1" /><feFuncG type="table" tableValues="0 0.66274509803922" /><feFuncB type="table" tableValues="0.84705882352941 0.41960784313725" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg>    <div class="content-wrap content-single">
        <div class="post-content">
            <div class="post-header">
                <h1>[트러블슈팅기] CSR에서 동적 OG 메타태그 적용하기</h1>
                <div class="post-header-meta">
                                                                <div class="post-header-author">
                            <span>Dec.21.2023</span>
                            <span>이주영</span>
                            <span class="thumb"><img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/profile-02-150x150.png" width="150" height="150" alt="이주영" class="avatar avatar-150 wp-user-avatar wp-user-avatar-150 alignnone photo" /></span>
                        </div>
                                        <div class="post-header-sns">
                        <button type="button" onclick="SNS('clipboard')"><img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/link.svg" alt="clipboard"></button>
                        <button type="button" onclick="SNS('facebook')"><img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/facebook.svg" alt="facebook"></button>
                        <button type="button" onclick="SNS('twitter')"><img src="https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/imgs/twitter.svg" alt="twitter"></button>
                    </div>
                    <p class="post-header-categories">
                                                    <span class="cats">
                                                                    <a class="cat-tag" href="/?pcat=aws" data-slug="aws">
                                    AWS                                </a>
                                                                    <a class="cat-tag" href="/?pcat=web-frontend" data-slug="web-frontend">
                                    Web Frontend                                </a>
                                                            </span>
                                            </p>
                </div>
            </div>
            <div class="post-content-inner">
                <div class="toc">
                    <ul>
                        <li v-for="item in tocs">
                            <a class="item" v-bind:href="'#'+item.link">{{item.name}}</a>
                            <ul v-if="item.sub && item.sub.length > 0">
                                <li v-for="sub in item.sub">
                                    <a v-bind:href="'#'+sub.link">{{sub.name}}</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <blockquote>
<p>이 글은 Client Side Rendering(CSR)과 CSR 시 인프라 구성환경 중 AWS CloudFront+S3 조합에서의 트러블슈팅기입니다.</p>
</blockquote>
<h2>OpenGraph(OG) 가 뭐지?</h2>
<p>글을 시작하기 전에, OpenGraph(OG)가 익숙하지 않으신 분들을 위해서 스크린숏 하나를 보여 드리겠습니다.<br />
<img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/Pasted-image-20231215203852-750x548.png" alt="" /></p>
<p>요즘 웹페이지 주소를 공유하면 잠시 후 그 밑에 이미지와 문구가 표현되는 것 보셨으리라 생각합니다. 이 이미지와 문구들은 공유한 주소에 접근한 후, 그 페이지에서 양식에 맞는 정보를 추출해냅니다. 그 양식이 바로 OpenGraph(OG)입니다. 이제 OG가 혼란스럽지 않으시죠? 자, 이제 그럼 트러블슈팅기 속으로 들어가보시겠습니다.</p>
<h2>이 글을 쓰게 된 이야기!</h2>
<p>&quot;오! OpenGraph(OG) meta tag를 동적으로 넣을 수 있어야 된다고요?&quot;<br />
최근에 공유하기 링크생성 작업을 하게 되면서 요청받은 내용이었습니다. 생성된 공유하기 링크를 SNS나, 문자메시지에서 보내면 OG meta tag를 통해서 이미지가 동적으로 바뀌어야 하는 요구조건이 있었습니다. </p>
<p>이게 왜 문제지?라고 생각하시는 분들을 위해서 간단하게 배민우리동네팀의 프론트엔드 기술스택을 소개하도록 하겠습니다.<br />
배민우리동네는 초기에 빠른 Minimum Viable Product(MVP) 개발, 서버관리의 부담을 줄이기 위한 목적으로 Vite(<a href="https://ko.vitejs.dev/">Vite | 차세대 프런트엔드 개발 툴</a>) 기반으로 CSR 웹애플리케이션을 제작하였습니다. 차후 Next.js로 마이그레이션 계획은 있지만 OG meta tag를 위해서 기술 스택을 변경할만한 사안은 아니었습니다. 그래서 현재 환경에서 가능한 방법을 찾기 시작했습니다.</p>
<p>다시 문제로 돌아오면, 현재 CSR 환경에서는 아래의 예시와 같이 정적인 HTML 파일이 모두 동일하게 유저에게 전달됩니다.</p>
<pre><code class="language-html">&lt;html lang=&quot;ko&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, viewport-fit=cover&quot; /&gt;
        &lt;title&gt;HTML 예제&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>여기서 문제가 생긴 것이죠. OG meta tag는 HTML 파일의 head 내부에 메타 태그의 형식으로 들어가야 합니다.</p>
<pre><code class="language-html">&lt;html lang=&quot;ko&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, viewport-fit=cover&quot; /&gt;
        &lt;meta property=&quot;og:title&quot; content=&quot;[배민우리동네] 여기를 추천해요!&quot; /&gt;
        &lt;meta property=&quot;og:description&quot; content=&quot;우리동네 정보부터 혜택까지!&quot; /&gt;
        &lt;meta property=&quot;og:image&quot; content=&quot;https://baemin.com/baedal.jpg&quot; /&gt;
        &lt;title&gt;HTML 예제&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>요구사항에 따르면 위에 &#8216;og:image&#8217; 메타 태그의 content 값을 동적으로 변경해 주어야 합니다.<br />
하지만 CSR에서는 위 코드가 고정이기 때문에 무조건 정적으로 동일한 내용을 유저가 보게 하거나, 다른 도움 없이는 OG meta tag를 동적으로 구현할 수가 없는 것이죠. </p>
<p>결론적으로는 참 난감한 요구사항이었습니다.<br />
하지만 배민우리동네팀이 사용하고 있던 인프라 환경에서 한줄기 희망이 보였습니다.</p>
<h2>시작 전엔 완벽했던 계획</h2>
<p>다행히도 배민우리동네 웹애플리케이션은 AWS 인프라를 사용하고 있습니다. 좀 더 자세히 말씀드리면, CloudFront와 S3를 이용하는 매우 정석적인 방법을 사용하고 있습니다.</p>
<p>CloudFront에서는 엣지함수라는 것을 사용할 수 있는데, AWS Docs(<a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/edge-functions.html">함수를 사용하여 엣지에서 사용자 지정</a>, Amazon CloudFront 개발자 안내서)에서 설명하는 엣지함수의 역할은 간단히 아래와 같습니다.</p>
<blockquote>
<p>Amazon CloudFront를 사용하면 자체 코드를 작성하여 CloudFront 배포에서 HTTP 요청 및 응답을 처리하는 방법을 사용자 지정할 수 있습니다.</p>
</blockquote>
<p>위 설명처럼 엣지함수를 활용해 응답을 처리하는 방법을 직접 지정하여 아래와 같이 문제를 해결하려고 하였습니다.<br />
<img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/edge-function_flow-750x301.png" alt="" /><br />
<em>원본 출처: AWS Docs</em></p>
<ul>
<li>위 도식도에서 보면 유저에게 4-viewer response를 통해 최종 결괏값인 HTML파일을 전달하게 되는데, 이 파일에 OG meta tag를 추가한 다음 리턴하는 것으로 수정하면 간단히 해결될 것이라 생각했습니다. 즉 ④-Viewer response 에서 함수를 추가해서 HTML을 동적으로 수정하는 방법을 구상하였습니다.</li>
</ul>
<p>그래서 초기에 생각했던 흐름은 아래와 같습니다.</p>
<ol>
<li>공유링크를 생성할때 링크에 query parameter 형태로 이미지 주소에 대한 정보를 삽입한다.</li>
<li>④-Viewer response 스텝에서 엣지 함수를 실행시킨 후, 파싱한 query parameter 정보를 활용해서 OG meta tag 정보를 생성한다.</li>
<li>생성한 OG meta tag 정보로 Origin server 혹은 CloudFront cache에서 넘어 온 HTML을 수정한 후 유저에게 전달한다.</li>
</ol>
<p>계획은 완벽해 보였고, 어렵지 않게 해결할 수 있을 것이라 생각했습니다.<br />
하지만 계획과 현실은 달랐습니다.</p>
<h2>선택의 기로</h2>
<p>사실 이 부분은 트러블은 아닙니다. 하지만 이후에 진행되는 트러블슈팅을 설명하는데 도움이 되실 수 있어서 간단히 소개 하고자 합니다.</p>
<p>CloudFront의 엣지함수는 두가지 종류가 있습니다. </p>
<ul>
<li>출시 된지 10년이 되가는 관록의 <strong>Lambda@Edge</strong> </li>
<li>출시 된지 2년여 밖에 되지 않은 젊은피 <strong>CloudFront Functions</strong>가 있습니다.</li>
</ul>
<table>
<thead>
<tr>
<th>기능</th>
<th>CloudFront Functions</th>
<th>Lambda@Edge</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>장점</strong></td>
</tr>
<tr>
<td>1. 성능과 효율성</td>
<td>매우 빠른 실행 시간과 낮은 지연 시간, 경량 작업에 이상적</td>
<td>다양한 런타임과 외부 라이브러리 지원, 복잡한 애플리케이션 로직 구현 가능</td>
</tr>
<tr>
<td>2. 비용 효율성</td>
<td>비용이 적게 들며, 작은 함수에 대해 매우 저렴함</td>
<td>&#8211;</td>
</tr>
<tr>
<td>3. 보안</td>
<td>VPC, 파일 시스템, 외부 네트워크에 액세스 불가, 보안 강화</td>
<td>다른 AWS 서비스와의 통합 가능, 더 강력한 애플리케이션 구축 가능</td>
</tr>
<tr>
<td><strong>단점</strong></td>
<td></td>
</tr>
<tr>
<td>1. 기능 제한</td>
<td>외부 라이브러리나 NPM 패키지 사용 불가, 기능적으로 제한적</td>
<td>비용이 더 높음, 특히 높은 트래픽과 복잡한 함수의 경우 비용 상승 가능</td>
</tr>
<tr>
<td>2. 실행 시간 제한</td>
<td>매우 짧은 실행 시간, 복잡하거나 시간이 많이 소요되는 작업에 부적합</td>
<td>초기 실행 지연 (냉동 시작) 시간이 있을 수 있음, 자주 사용되지 않는 함수에서 지연 발생 가능</td>
</tr>
<tr>
<td>3. 리소스 제한</td>
<td>제한된 CPU 및 메모리 리소스, 리소스 집약적인 작업에 부적합</td>
<td>보다 복잡한 보안 및 관리 고려사항, 외부 라이브러리 사용 시 보안 취약점이나 관리 문제 발생 가능</td>
</tr>
</tbody>
</table>
<p>현재 저희 요구사항을 기준으로 불필요한 조건으로는 아래와 같습니다.</p>
<ol>
<li>HTML 변조과정에서 필요한 정보는 모두 Query parameter로 넘어올 것이기 때문에, 외부 네트워크에 접근할 필요가 없음.</li>
<li>간단한 변경작업이기 때문에 외부 라이브러리 사용 및 큰 리스소 불필요.</li>
</ol>
<p>정리한 것처럼 현재 저희에게는 CloudFront Functions가 더 적합하였습니다.</p>
<p>하지만 결국엔 Lambda@edge를 선택하게 되었었는데, 이유는 아래와 같습니다.</p>
<p>CloudFront Functions 공식 Docs에서는 아래와 같이 써 있었고,</p>
<blockquote>
<p>함수는 CloudFront 캐시 또는 오리진에서 <strong>반환된 원래 본문에 액세스할 수 없습</strong>니다. (참고: <a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/functions-event-structure.html">CloudFront 함수 이벤트 구조</a>, Amazon CloudFront 개발자 안내서)</p>
</blockquote>
<p>Lambda@edge Docs에서는 아래와 같이 씌어 있습니다.</p>
<blockquote>
<p>원본 응답 이벤트에서 HTTP 응답의 <strong>본문을 바꾸거나 제거할 수도</strong> 있습니다.<br />
(참고: <a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/lambda-examples.html#lambda-examples-redirecting-examples">Lambda@Edge 예제 함수</a>, Amazon CloudFront 개발자 안내서)</p>
</blockquote>
<p>저희의 계획은 HTML을 수정하는 것이었기 때문에 본문에 접근할 수 있어야 했고, 그렇기 때문에 Lambda@edge를 선택할 수 밖에 없었습니다.</p>
<p>시간이 흐른 후 이 결정이 &#8216;<strong>본문을 바꾸거나 제거할 수도</strong>&#8216; 라는 설명을 크게 잘못 이해한 후 도출한 결과 였다는 사실을 깨달았습니다.</p>
<h2>엇! 내 로그는 어디에?</h2>
<p>&#8216;도대체 뭘 잘못 이해했다는 거야?&#8217; 라며 궁금하신 분이 있으시겠지만. 그것에 대한 내용은 잠시 후에 다루기로 하고, 문제 해결 흐름에 따라 엣지함수 로그에 대해 겪었던 트러블에 대해서 먼저 나누려고 합니다.</p>
<p>테스트를 하면서 필연적으로 하는 것은 로그확인 입니다. 기존에 Lambda를 사용한 경험이 있어서 같은 방식으로 로그를 확인할 수 있을 것이라고 생각했는데, 로그가 전혀 찍히지 않았습니다. (<em>사실은 로그를 잘못된 곳에서 찾고 있었습니다.</em>)</p>
<p>Lambda@edge는 별도의 콘솔이 화면이 존재하는 것이 아니라 Lambda의 콘솔 화면을 공유합니다.</p>
<p>보통 Lambda를 사용 할 때 로그를 확인하는 방법은 아래와 같습니다.<br />
Lambda 콘솔 메뉴에서 Monitor 메뉴안에 View CloudWatch logs 라는 버튼이 있습니다.<br />
<img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/Screenshot-2023-12-10-at-2.16.17-PM-750x101.png" alt="" /><br />
위 버튼을 클릭하면 로그를 확인할 수 있는 CloudWatch 화면으로 이동합니다. Lambda의 로그 스트림을 확인할 수 있는 페이지로 한번에 이동을 하는데요, 이 때 로그 그룹의 이름은 아래와 같은 형식을 갖습니다.</p>
<blockquote>
<p>/aws/lambda/[lambda의 함수명]</p>
</blockquote>
<p>예를 들어, 저는 Lambda 함수명을 &#8216;meta-adder&#8217; 라고 지었는데요, 그렇다면 CloudWatch에서 &#8216;/aws/lambda/meta-adder&#8217; 로그그룹에서 로그들을 확인할 수 있습니다.</p>
<p>여기서 한 가지 더 생각해 봐야 할 것은 Region 입니다.<br />
Lambda@edge 함수를 연동하려면 Lambda를 생성할 때 AWS의 Region을 <strong>N.Virginia 리전(us-east-1)</strong>으로 설정해야 합니다.  다른 Region에서 연동할 수 없습니다. 따라서 위의 &#8216;View CloudWatch logs&#8217; 버튼을 클릭하면 N.Virginia Region에서 로그를 검색하게 됩니다.</p>
<p>여기에서도 Lambda@edge 함수들의 로그를 확인할 수는 있습니다. <strong>단, 콘솔 내에서 테스트 시 발생한 로그들입니다.</strong>  위 스크린숏 Test 섹션에서 &#8216;/aws/lambda/[Lambda의 함수명]&#8217;의 네이밍 패턴을 가지고 있는 로그 그룹에서 확인할 수 있습니다.</p>
<p>CloudFront에서 실행된 Lambda@edge 함수의 로그들은 완전히 다른 곳에 존재합니다.<br />
첫 번째로 확인해야 하는 것은 Region입니다. Lambda에서 작성한 함수들이 Cloudfront에 배포되고 그 안에서 실행되기 때문에 AWS Docs에서는 CloudFront가 <strong>실행되는 Region</strong>에서 확인해야 한다고 안내하고 있습니다.<br />
즉, 한국에서 사용하는 경우는 CloudFront가 서울 Region에서 실행이 될 것이기 때문에 이 Region의 CloudWatch에서 확인해야 합니다.</p>
<p>또한 로그그룹의 이름도 달라지고, 아래와 같은 패턴을 갖습니다. 위의 패턴과 형식이 많이 다르죠.</p>
<blockquote>
<p>/aws/cloudfront/LambdaEdge/[CloudFront id]</p>
</blockquote>
<p>예를 들어 CloudFront의 id 가 &#8216;E3PAVEWQJMMLFS&#8217; 일 경우 아래와 같이 로그그룹이 생깁니다. <strong>여기에서 실제로 실행되는 로그를 확인할 수 있습니다.</strong><br />
<img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/Screenshot-2023-12-10-at-2.22.34-PM-750x277.png" alt="" /></p>
<p>정리를 하면 CloudFront에서 동작하는 Lambda@edge 함수의 로그를 확인하려면</p>
<ol>
<li>CloudFront가 동작하는 Region으로 변경한다.</li>
<li>CloudWatch에서 CloudFront id를 가지고 검색한 다음 나오는 로그그룹 결과를 통해서 로그를 확인한다.</li>
</ol>
<p>여러분들은 저와 같은 실수를 하지 않으시기를 바랍니다.</p>
<p><strong>CloudFront Functions는 Lambda@edge와는 다른 로그확인 방식을 사용합니다.</strong> 다행히 더 간단합니다.<br />
CloudFront가 실행되는 <strong>리전에 상관없이 N.Virginia 에서 확인</strong>합니다.  그리고 로그그룹 이름은 아래와 같은 패턴을 갖습니다.</p>
<blockquote>
<p>/aws/cloudfront/function/[CloudFront function의 이름]</p>
</blockquote>
<p>예를 들어 CloudFront function의 이름을 &#8216;client-request-handler&#8217;로 하였다면,<br />
&#8216;/aws/cloudfront/function/client-request-handler&#8217; 로그그룹에서 로그를 확인하실 수 있습니다.</p>
<p>이렇게 로그를 확인할 수 있게 되면서 제대로 테스트를 할 수 있게 되었고, 곧 충격적인 사실을 마주하게 됩니다.</p>
<h2>Body에 접근할 수가 없다</h2>
<p>계획대로라면 ④-Viewer response 쪽 Lambda@edge 함수에서 HTML에 meta tag를 주입하여 유저에게 리턴하는 것이었습니다. 하지만 문제가 있었는데요, body를 함수에서 접근할 수가 없었습니다.</p>
<p>어? 분명히 아까 &#8216;원본 응답 이벤트에서 HTTP 응답의 <strong>본문을 바꾸거나 제거할 수도</strong> 있습니다.&#8217; 라고 써 있는 AWS Docs 내용을 소개해 드렸는데 body에 접근할 수 없었다는 것은 무슨 뜻일까요?</p>
<p><img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/edge-function_flow-750x301.png" alt="" /><br />
위에서 보여드렸던 엣지함수 도식도를 다시 가지고 왔습니다.</p>
<p>사실 Lambda@edge 설정을 할 때 &#8216;include body&#8217; 란 옵션이 있습니다. 하지만 이 body를 포함하는 옵션은 ①번, ②번의 경우에만 적용할 수 있습니다. 즉, request 함수 에서만 body를 포함시킬 수 있습니다.<br />
유저가 body를 포함하는 request를 한 경우에만 요청에서 body를 확인하고 수정을 할 수 있는 것이지,<br />
origin을 통과 하여 나오는 ③번, ④번 response에서는 body를 포함할 수 있는 방법이 없었습니다.</p>
<p>그렇다면 &#8216;<strong>본문을 바꾸거나 제거할 수도</strong> 있다&#8217; 라는 건 무슨 뜻이었을까요?<br />
여러 테스트를 거쳐 확인한 결과 저 설명의 뜻은 아래와 같았습니다.</p>
<blockquote>
<p>Origin에서 넘어 오는 body는 참고할 수 없지만, response 함수에서 body 내용을 <strong>새롭게 교체</strong>하거나, <strong>아예 삭제 하여 빈값</strong>으로 보낼 수 있다.</p>
</blockquote>
<p><strong>초기에 &#8216;바꾸다&#8217; 라는 의미를 &#8216;수정할 수 있다&#8217; 라고 오해를 하여 생긴 문제였습니다.</strong></p>
<p>오해는 풀었지만, 큰 문제가 생겼습니다.<br />
초기에 계획했던 동작인 Viewer response body를 조작하여 유저에게 리턴해줄 수가 없게 된 것입니다.</p>
<h2>새로운 방법의 발견!</h2>
<p>같은 팀에서 저와 같이 프론트엔드 개발을 함께하고 있는 시니어 개발자 송요창님께 도움을 요청하였습니다. 이때, 요창 님이 틀에 갇혀 있던 저의 생각을 끄집어 내주셨습니다.</p>
<p>그때 말씀해 주신 내용을 정리하였습니다.</p>
<blockquote>
<p>&quot;OG를 나타내기 위해서 필요한 값은 HTML안에 있는 header의 meta 태그들 뿐입니다. body에 실제 어떤 데이터가 있는지, 심지어 body에 데이터가 없더라도 아무 상관 없을 것입니다.&quot;</p>
</blockquote>
<p><img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/edge-function_flow-750x301.png" alt="" /><br />
그래서 새롭게 낸 아이디어는 다음과 같습니다.</p>
<ol>
<li>①-Viewer request에서 user-agent를 확인하고 bot의 접근이라면, ④-Viewer response에서 body를 OG meta tag들만 있는 HTML 파일로 <strong>교체</strong>(<em>이 때, 기존의 body 내용은 참고하지 않습니다</em>)하여 bot에게 리턴한다.</li>
<li>만약 ①에서 user-agent가 bot이 아니라면, ④-Viewer response에서 body를 교체하는 아무런 동작도 하지 않고 CloudFront cache 혹은 origin 에서 넘어온 데이터를 그대로 유저에게 전달한다.</li>
</ol>
<p>여기에서 또 새로운 로직이 추가 되었는데요, 바로 user-agent로 최종 사용자가 bot인지 체크를 하게 됩니다. 그 이유에 대해서 간단하게 설명 드리겠습니다. 위에 새롭게 도출해낸 아이디어에서 보면 기존 bot일 때 HTML 파일을 교체합니다. 이 때, 교체된 HTML 파일은 Meta 정보를 위한 필숫값만 갖게 되고, 실제로 앱에서 필요로 하는 정보들은 모두 유실이 됩니다. 그래서 bot이 아닐 때는 origin에서 넘어온 원본 HTML을 넘겨 줘야 최종 사용자가 웹애플리케이션을 사용할 수 있습니다. 그래서 bot인지 유무를 확인하는 로직이 필요합니다.</p>
<p>Lambda@edge를 선택했던 이유는 body에 접근하기 위해서였는데, body에 접근할 수 없으니 CloudFront Function을 통해서 작업을 하기로 하였습니다.</p>
<p>이렇게 하면 드디어 문제를 해결할 수 있을 것이라고 생각하였지만, 순조롭게 흘러가지는 않았습니다.</p>
<h2>Custom header 사라지다</h2>
<p>①-Viewer request 함수에서 bot인걸 판단하면 ④-Viewer response 쪽 함수에서는 이 호출을 실행한 주체가 bot인지 어떻게 알 수 있을까요?</p>
<p>저는 위 문제를 해결하기 위해서 Custom header를 사용하기로 하였습니다. ①-Viewer request 함수에서 user-agent를 통해 bot 여부를 파악하고, isbot 이란 custom header에 &#8216;true&#8217; 혹은 &#8216;false&#8217; 값을 삽입하는 로직을 넣어서 테스트를 수행하였습니다.</p>
<p>하지만 곧바로 문제를 발견하였습니다.<br />
그 문제는, ①-Viewer request에서 추가한 custom header가 origin 을 지나는 시점 부터는 사라진다는 것이었습니다. Custom header는 ②-Origin request 까지는 유지가 됩니다. 하지만 ③-Origin response 부터는 없어지는 것이죠. 현재 저희는 S3를 Origin으로 사용하고 있는데 리퀘스트에서의 Custom header를 origin이 받지만, Origin에서는 Response를 생성할 때 없어지고 있었습니다.</p>
<p>그렇다면 ④-Viewer response에서 직접 user-agent를 확인해서 bot인지 알 수 있을까요?<br />
그것도 불가능합니다. 그 이유는 user-agent는 origin을 거치면서 origin의 user-agent로 변경됩니다. 그래서 response 쪽 함수에서 user-agent를 확인하면 S3 / CloudFront가 됩니다.</p>
<p>다시 길이 없어졌습니다. 모든 방법이 실패해서 엣지함수를 쓰는 방법은 포기해야 하나 생각을 했습니다.</p>
<h2>최종시도, 그리고성공!</h2>
<p>항상 모든 방법이 실패할 때는 마지막으로 공식문서로 돌아오는 습관이 있습니다.<br />
이번에도 읽었던 문서를 세번정도 다시 읽었습니다.</p>
<p>읽고 있는데 제 눈길을 사로 잡는 설명이 있었습니다. 분명히 전에도 읽었던 부분인데 느낌이 새로웠습니다.</p>
<p>그 설명은 바로 엣지함수에서 트리거할 수 있는 CloudFront 이벤트에 관한 설명(<a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/lambda-cloudfront-trigger-events.html">링크</a>)이었는데요, 아래 스크린숏을 가지고 왔습니다. (<em>위 설명링크는 Lambda@edge 쪽의 설명이나 CloudFront Function 설명에서도 참고하는 자료로 사용하고 있습니다.</em>)<br />
<img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/Screenshot-2023-12-12-at-9.15.30-PM-750x225.png" alt="" /><br />
<em>출처: <a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/lambda-cloudfront-trigger-events.html">Lambda@Edge 함수를 트리거할 수 있는 CloudFront 이벤트</a>, Amazon CloudFront 개발자 안내서</em></p>
<p>뷰어 응답 즉 ④-Viewer response가 실행되지 않는 조건 중에서 세번째 조건</p>
<blockquote>
<p>최종 사용자 요청 이벤트가 트리거한 함수로부터 응답이 생성되는 경우</p>
</blockquote>
<p>최종 사용자 요청 이벤트인 ①-Viewer request에서 바로 최종사용자(End user)로 응답이 생성될 수 있다. 그렇다면 ①-Viewer request에서 바로 유저에게 값을 전달하는게 가능할까?<br />
한줄기 빛과 같은 문구였습니다.</p>
<p>이전까지 저는 ①-Viewer request의 흐름이 공식문서의 그림처럼 단방향으로만 흐르는줄로 알고 있었습니다. 하지만 저 문구를 봤을때 그게 아닐 수도 있다는 생각에 바로 테스트를 시작하였습니다.</p>
<p>테스트 방법은 아래와 같습니다.<br />
①-Viewer request에서 user-agent로 bot임을 판단하면, return 값을 아래와 같이 주었습니다.<br />
만약 bot이 아니라면 기존과 같이 event.request를 return 하도록 하였습니다.</p>
<pre><code class="language-js">function handler(event) {
    var request = event.request;
    /**
    ** 로직들...
    **/
    if (isBot) {
        return {
            statusCode: 200,
            statusDescription: &#039;OK&#039;,
            headers: {
               &#039;content-type&#039;: {
                    value: &#039;text/html&#039;
                }
            },
            body: {
                encoding: &#039;text&#039;,
                data: result // OG meta tag 가 포함된 HTML
            }
        };
    }
    return request;
}</code></pre>
<p>결과는 대성공!</p>
<p>최종 결과물은 아래와 같습니다.</p>
<p><img src="https://techblog.woowahan.com/wp-content/uploads/2023/12/edited-edge-flow-750x301.png" alt="" /></p>
<ul>
<li>①-① Viewer request에서 만약에 bot이라면 다음 단계를 진행하지 않고 바로 ①-②로 리턴을 하면서 사이클이 종료가 됩니다.</li>
<li>bot이 아니라면 원래 순서대로 ①-① -&gt; ② -&gt; ③ -&gt; ④ 진행되거나,<br />
CloudFront chche가 hit 되어있다면 ①-① -&gt; ④ 의 과정을 거칠 것입니다.</li>
</ul>
<p>이렇게 모든 것이 평화롭게 끝나는 줄 알았습니다.</p>
<h2>아직 끝나지 않았던 이슈</h2>
<p>이제 다 끝난 줄 알았습니다. QA를 시작하기 전까진 말이죠.<br />
기획 요구사항에는 SNS뿐만 아니라, 문자메시지를 보낼 때에도 정상적으로 노출이 되어야 했습니다. iOS에서는 테스트 시 문제가 없었습니다. 그런데 안드로이드에서 문제가 생겼습니다.</p>
<p>테스트를 하는 안드로이드 기종은 갤럭시였는데, 사내 다른 서비스들은 OG정보가 잘 노출되는데 배민우리동네 서비스만 노출되지 않는 문제가 발생하였습니다.</p>
<p>로그부터 파악해 봐야 합니다. 기본 안드로이드 테스트 장비인 갤럭시가 OG태그를 가져오기 위해 접근한 로그 파악 성공. 그리고 이 로그에서 상당히 특이한 user-agent를 발견하게 됩니다.</p>
<blockquote>
<p>Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:24.0) Gecko/20100101 Firefox/24.0</p>
</blockquote>
<p>기본적으로 갤럭시에서 장비를 통해 접근하면 아래와 같은 user-agent가 남습니다.</p>
<blockquote>
<p>Mozilla/5.0 (Linux; Android 9; SM-G960N Build/PPR1.180610.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/119.0.6045.134 Mobile Safari/537.36</p>
</blockquote>
<p>모바일 브라우저 및 애플리케이션에서의 접근은 안드로이드 버전과 갤럭시폰의 코드명이 붙는데 반해서, OG태그에 접근한 bot은 다른 user-agent를 갖고 있습니다.</p>
<p>바로 이것이 문제가 되었는데요.</p>
<p>Viewer Request 엣지함수에서 bot을 탐지 하기 위한 Regular expression(regex)은 아래와 같았습니다.</p>
<pre><code class="language-js">var BOT_CHECK_REGEX = /googlebot|bingbot|yandex|baiduspider|twitterbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator|kakaotalk-scrap|yeti|naverbot|kakaostory-og-reader|daum/i;
</code></pre>
<p>테스트한 다른 환경에서는 위 regex를 통해 모두 bot으로 판별이 되었는데, 갤럭시에서 접근할 때 사용한 user-agent는 판별할 수가 없었던 것입니다.<br />
여러 번 테스트 끝에 &#8216;X11&#8217; 을 regex에 추가 하여 갤럭시 문자메시지창에서의 문제를 해결하였습니다.</p>
<p>위 문제를 해결하면서 새롭게 알게 된 사실이 있습니다.<br />
보통 여타 SNS서비스들 및 iOS는 링크를 입력하게 되면 OG태그를 위한 접속 및 파싱 등의 작업을 서버에서 하고 결과를 클라이언트에 내려 노출하는 식으로 동작을 합니다.<br />
하지만 갤럭시 문자메시지는 클라이언트인 폰자체가 OG태그 정보를 얻기 위해서 사이트에 접속하고 직접 파싱하여 정보를 노출하고 있는 것을 확인하였습니다.</p>
<p>또한 이 기능은 안드로이드의 기본 기능이 아니라 삼성에서 자체적으로 넣은 것으로, 옵션에서 해당 기능을 켜고 끌 수 있었습니다. 그리고 이런 기능을 넣지 않았던 단말기들(LG 스마트폰 등)은 OG정보를 볼 수가 없었습니다.</p>
<p>이렇게 모든 문제가 평화롭게 해결되었습니다.</p>
<h2>글을 마치며</h2>
<p>항상 예상과 다르게 흘러가는 작업들을 보면서 다른 분들은 저와 같은 실수를 하지 않았으면 하는 바람에 트러블슈팅기를 나누어 보았습니다.</p>
<p>사실 위에서 기술한 것보다 더 자잘한 이슈들도 더 있었습니다.<br />
특히 CloudFront는 기본적으로 캐싱을 하기 때문에, 내가 테스트한 결과값이 제대로 반영이 안되었을때 매우 혼란스러웠습니다. 나의 새 코드가 아직 캐시에 반영이 안 된 것인지, 혹은 로직상의 문제인지 확인하기가 쉽지 않았습니다. 캐시가 Invalidation되는 시간을 정확히 알수 없던 것도 한몫 했습니다.</p>
<p>이 글이 여러분들의 개발작업에 조금이라도 도움이 될 수 있길 바라며 글을 마치겠습니다.</p>
            </div>
                    </div>
                <div class="fb_comment_wrap">
            <div id="" class="ufc-comments ufc-comments-area" style="width:100%;"><div id="ufc-button-div" style="text-align: center; display: none;"><button id="ufc-button" class="btn button">Leave a Comment</button></div><div id="fbc-comments-div" class="fb-comments" data-notify="true" data-colorscheme="light" data-href="https://techblog.woowahan.com/15469/" data-numposts="10" data-order-by="social" data-width="100%"></div></div>
<!-- Facebook SDK is added by Ultimate Social Comments v2.0.0 plugin -->
<div id="fb-root"></div><script type="text/javascript">(function() {(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.async = true;
        js.src = '//connect.facebook.net/ko_KR/sdk.js#xfbml=1&autoLogAppEvents=1&version=v7.0&appId=596588250503455';
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        })();</script>
<!-- / End of Facebook SDK -->
        </div>
        <div class="col col-1 post-bottom">
            <a href="/" class="toback">
                목록으로 돌아가기
            </a>
            <div class="col col-2">
                <div class="prev">
                    <a href="https://techblog.woowahan.com/15236/" rel="prev">결제는 계속된다: 결제 담당자가 장애에 대응하는 방법</a>                </div>
                <div class="next">
                                    </div>
            </div>
        </div>
    </div>


    <script>
        console.log('referrer : ', document.referrer)
    </script>
</div>
<footer>
<!-- 푸터내용 -->
</footer>
		<script type='text/javascript' id='StrCPVisits_js_frontend-js-extra'>
/* <![CDATA[ */
var STR_CPVISITS = {"security":"730a85f1d0","ajax_url":"https:\/\/techblog.woowahan.com\/wp-admin\/admin-ajax.php","text_page_name":"PAGE NAME","text_cannot_access_page_name":"Cannot access page name - try to flush server cache...","text_message":"MESSAGE","text_total_page_visits":"TOTAL PAGE VISITS","text_total_website_visits":"TOTAL WEBSITE VISITS"};
/* ]]> */
</script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/page-visits-counter-lite/assets/frontend/page-visits-counter-lite-ajax.js' id='StrCPVisits_js_frontend-js'></script>
<script type='text/javascript' id='ufc-frontend-script-js-extra'>
/* <![CDATA[ */
var ufc_frontend_ajax_data = {"ajaxurl":"https:\/\/techblog.woowahan.com\/wp-admin\/admin-ajax.php","permalink":"https:\/\/techblog.woowahan.com\/15469\/","title":"[\ud2b8\ub7ec\ube14\uc288\ud305\uae30] CSR\uc5d0\uc11c \ub3d9\uc801 OG \uba54\ud0c0\ud0dc\uadf8 \uc801\uc6a9\ud558\uae30","postid":"15469","security":"76aaa7a63d","version":"2.0.0"};
/* ]]> */
</script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/ultimate-facebook-comments-2/public/js/frontend.min.js' id='ufc-frontend-script-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/themes/techblog-20231219-3/assets/js/main.js' id='main-js-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/components/prism-core.min.js' id='prism-js-0-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/prism.min.js' id='prism-js-1-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/plugins/line-numbers/prism-line-numbers.min.js' id='prism-js-2-js'></script>
<script type='text/javascript' src='https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/plugins/autoloader/prism-autoloader.min.js' id='prism-js-3-js'></script>
 <script id="auto_loader_config_scripts"> Prism.plugins.autoloader.languages_path = "https://techblog.woowahan.com/wp-content/plugins/wp-githuber-md/assets/vendor/prism/components/"; </script>  <script id="module-prism-line-number"> (function($) { $(function() { $("code").each(function() { var parent_div = $(this).parent("pre"); var pre_css = $(this).attr("class"); if (typeof pre_css !== "undefined" && -1 !== pre_css.indexOf("language-")) { parent_div.addClass("line-numbers"); } }); }); })(jQuery); </script> 	</body>
</html>
<!-- Page supported by LiteSpeed Cache 3.6.4 on 2023-12-26 00:07:21 -->